\* TLC Configuration for ExecutorScheduler.tla
\*
\* Phase: TLA-002 (Part 30: TLA+ Protocol Verification)
\* Author: Worker #2347
\* Date: 2026-01-03
\*
\* Run with: tlc -config ExecutorScheduler.cfg ExecutorScheduler.tla

\* =========================================================================
\* SPECIFICATION
\* =========================================================================
SPECIFICATION Spec

\* =========================================================================
\* CONSTANTS - Small model for tractable verification
\* =========================================================================

\* Task IDs (3 tasks is sufficient to find most bugs)
CONSTANT Tasks = {T1, T2, T3}

\* Worker IDs (2 workers for load balancing tests)
CONSTANT Workers = {W1, W2}

\* Local queue threshold (low to trigger distribution)
CONSTANT LocalQueueThreshold = 2

\* Selection strategy - test each strategy separately:
\* Options: "RoundRobin", "LeastLoaded", "Random"
CONSTANT SelectionStrategy = "LeastLoaded"

\* Enable work-stealing
CONSTANT EnableStealing = TRUE

\* Maximum steal attempts
CONSTANT MaxStealAttempts = 3

\* =========================================================================
\* INVARIANTS - Safety properties to check
\* =========================================================================

INVARIANT TypeInvariant
INVARIANT NoDoubleAssignment
INVARIANT WorkerQueueConsistency
INVARIANT LocalExecutingConsistency
INVARIANT TaskCountInvariant
INVARIANT NoReexecution

\* Combined safety (includes all above)
INVARIANT Safety

\* =========================================================================
\* PROPERTIES - Liveness properties to check
\* =========================================================================

PROPERTY AllTasksComplete
PROPERTY EventualCompletion
PROPERTY NoStarvation
PROPERTY EventualTermination

\* =========================================================================
\* STRATEGY-SPECIFIC PROPERTIES
\* =========================================================================

\* Uncomment based on SelectionStrategy:

\* For RoundRobin:
\* PROPERTY RoundRobinFairness

\* For LeastLoaded:
\* PROPERTY LeastLoadedBalance

\* =========================================================================
\* STATE CONSTRAINTS (limit state space for model checking)
\* =========================================================================

\* Keep checking tractable (see ExecutorScheduler.tla:StateConstraint)
CONSTRAINT StateConstraint

\* =========================================================================
\* VIEW (optional - custom state equivalence)
\* =========================================================================

\* Use only essential variables for state distinction
\* VIEW <<taskState, phase>>

\* =========================================================================
\* DEADLOCK CHECK
\* =========================================================================

\* Check for deadlock (enabled by default)
CHECK_DEADLOCK FALSE
\* Note: Set to FALSE because termination (phase="complete") is valid end state

\* =========================================================================
\* ALTERNATIVE CONFIGURATIONS
\* =========================================================================

\* Configuration for Round-Robin testing:
\* CONSTANT SelectionStrategy = "RoundRobin"
\* PROPERTY RoundRobinFairness

\* Configuration for no-worker (local-only) testing:
\* CONSTANT Workers = {}
\* CONSTANT LocalQueueThreshold = 100

\* Configuration for stress testing (more tasks):
\* CONSTANT Tasks = {T1, T2, T3, T4, T5}
\* CONSTANT Workers = {W1, W2, W3}
\* CONSTANT LocalQueueThreshold = 3

\* =========================================================================
\* RUNNING INSTRUCTIONS
\* =========================================================================
\*
\* Basic run:
\*   tlc -config ExecutorScheduler.cfg ExecutorScheduler.tla
\*
\* With statistics:
\*   tlc -config ExecutorScheduler.cfg -coverage 1 ExecutorScheduler.tla
\*
\* BFS (breadth-first search for shortest counterexamples):
\*   tlc -config ExecutorScheduler.cfg -bfs ExecutorScheduler.tla
\*
\* Multi-threaded (faster on multi-core):
\*   tlc -config ExecutorScheduler.cfg -workers 4 ExecutorScheduler.tla
\*
\* Generate traces:
\*   tlc -config ExecutorScheduler.cfg -dump dot states.dot ExecutorScheduler.tla
\*
