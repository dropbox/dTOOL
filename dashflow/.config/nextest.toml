# Nextest configuration for DashFlow
# Prevents tests from hanging forever

[profile.default]
# Default timeout: 5 minutes per test
# Prevents runaway tests from blocking CI/workers
slow-timeout = { period = "60s", terminate-after = 3 }
fail-fast = false

# Per-test timeout: 5 minutes
test-threads = "num-cpus"

[profile.default.junit]
path = "target/nextest/default/junit.xml"

[profile.ci]
# CI profile: stricter timeouts
slow-timeout = { period = "30s", terminate-after = 2 }
fail-fast = true
retries = 0

# Long-running tests get more time
[[profile.default.overrides]]
filter = "test(/load_test/)"
slow-timeout = { period = "120s", terminate-after = 2 }

[[profile.default.overrides]]
filter = "test(/e2e/)"
slow-timeout = { period = "180s", terminate-after = 2 }

[[profile.default.overrides]]
filter = "test(/integration/)"
slow-timeout = { period = "120s", terminate-after = 2 }
